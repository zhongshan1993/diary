# nodejs模拟发布微博 #

最终还是被新浪屏蔽掉了23333333

    var http = require('http');
    var querystring = require('querystring');
    
    
    var postData = querystring.stringify({
    	'location': 'v6_content_home',
    	'appkey': '',
    	'style_type': 1,
    	'pic_id': '',
    	'text': 'abcdef',
    	'pdetail': '',
    	'rank': 0,
    	'rankid': '',
    	'module': 'stissue',
    	'pub_type': 'dialog',
    	'_t': 0
    });
    
    var options = {
    	hostname: 'weibo.com',
    	port: 80,
    	path: '/aj/mblog/add',
    	method: 'POST',
    	search: '?ajwvr=6&__rnd=1439038255644',
    	headers: {
    		'Accept': '*/*',
    		'Accept-Encoding': 'gzip, deflate',
    		'Accept-Language': 'zh-CN,zh;q=0.8,en;q=0.6',
    		'Connection': 'keep-alive',
    		'Content-Length': postData.length,
    		'Content-Type': 'SINAGLOBAL=343985385108.8892.1438510437391; TC-V5-G0=7975b0b5ccf92b43930889e90d938495; _s_tentry=login.sina.com.cn; Apache=5834440304897.726.1439006964222; ULV=1439006964270:6:6:6:5834440304897.726.1439006964222:1439006243877; TC-Page-G0=4c4b51307dd4a2e262171871fe64f295; TC-Ugrow-G0=02e35d9240e6933947925d24232af628; myuid=3940227426; login_sid_t=3b836c65cfd04c6aa5f611539b973381; SUS=SID-3940227426-1439011290-XD-uvwqg-c94ca82b1fa8678e2b7b3bad8c200bcb; SUE=es%3D30fc041fc0573b7634f73fa586d4cecb%26ev%3Dv1%26es2%3Dfd564d8cc063c3d46796fa555f2d8595%26rs0%3DnjsT6QhCpaPTI5Ue%252BzRCbjyQ0NnUR83GeXmSx3m17vhLz19UmjZjjjEV%252BO%252FjQeLDo4XaEzSfpXQnv5cH5yHbvZkH%252B2fik1SVLAXmQuYy13Yj%252BA%252BHpCGBGB3F2Iv8v4AKPMZZaTFtB%252Fnjdu%252FM%252B4ODDcZVTTmNIqQTcpnOplAqr00%253D%26rv%3D0; SUP=cv%3D1%26bt%3D1439011290%26et%3D1439097690%26d%3Dc909%26i%3D0bcb%26us%3D1%26vf%3D0%26vt%3D0%26ac%3D0%26st%3D0%26uid%3D3940227426%26name%3D15972122370%26nick%3Dzhongshan93%26fmp%3D%26lcp%3D2014-01-11%252020%253A00%253A34; SUB=_2A254weGKDeTxGeVH71IT8inIyTqIHXVbt1RCrDV8PUNbuNAPLWHNkW968-jwMr4gTSp0NdVOJTWgvHLWCA..; SUBP=0033WrSXqPxfM725Ws9jqgMF55529P9D9WFhZaybl-TFpvjul2i.REq35JpX5K2t; SUHB=0ebtUEbmNGHpgN; ALF=1470547290; SSOLoginState=1439011290; un=15972122370; wvr=6; UOR=tvs.youku.com,widget.weibo.com,www.cnblogs.com; YF-Page-G0=8eed071541083194c6ced89d2e32c24a; YF-V5-G0=1312426fba7c62175794755e73312c7d; YF-Ugrow-G0=56862bac2f6bf97368b95873bc687eef',
    		'Host': 'weibo.com',
    		'Origin': 'http://weibo.com',
    		'Referer': 'http://weibo.com/zhongshan93/home?topnav=1&wvr=6',
    		'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.152 Safari/537.36',
    		'X-Requested-With': 'XMLHttpRequest'
    		}
    }
    
    // exports.options = options; 
    
    var req = http.request(options, function(res) {
    	console.log('Status: ' + res.statusCode);
    	console.log('headers: ' + JSON.stringify(res.headers));
    
    	res.on('data', function(chunk) {
    		console.log(Buffer.isBuffer(chunk));
    		console.log(typeof chunk);
    	})
    
    	res.on('end', function() {
    		console.log('发送完毕');
    	})
    
    	
    })
    
    req.on('error', function(e) {
    	console.log('Error: '+e.message);
    })
    
    req.write(postData);
    req.end();